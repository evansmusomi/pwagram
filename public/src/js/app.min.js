var deferredPrompt;const enableNotificationsButtons=document.querySelectorAll(".enable-notifications");let registration;function displayConfirmNotification(){if("serviceWorker"in navigator){let i={body:"You successfully subscribed to our service",icon:"/src/images/icons/app-icon-96x96.png",image:"/src/images/sf-boat.jpg",dir:"ltr",lang:"en-US",vibrate:[100,50,200],badge:"/src/images/icons/app-icon-96x96.png",tag:"confirm-notification",renotify:!0,actions:[{action:"confirm",title:"Ok",icon:"/src/images/icons/app-icon-96x96.png"},{action:"cancel",title:"Cancel",icon:"/src/images/icons/app-icon-96x96.png"}]};navigator.serviceWorker.ready.then(e=>{e.showNotification("Successfully subscribed",i)})}}function configurePushSubscription(){"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(i=>(registration=i,i.pushManager.getSubscription())).then(i=>{if(null===i){let i=urlBase64ToUint8Array("BA-2FoWistRZCH8KTWRAYmJbIoNpbgxkIRG_RYVRy_FvdmtrsqT_s19vV95uhGOsXmXHAj5Yax4e4HIvnwB5POY");return registration.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:i})}}).then(i=>fetch("https://pwagramapp.firebaseio.com/subscriptions.json",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(i)})).then(i=>{i.ok&&displayConfirmNotification()}).catch(i=>{console.log(i)})}function askForNotificationPermission(){Notification.requestPermission(i=>{"granted"!==i?console.log("Permission not granted"):configurePushSubscription()})}window.Promise||(window.Promise=Promise),"serviceWorker"in navigator&&window.addEventListener("load",function(){navigator.serviceWorker.register("/service-worker.js").then(()=>{console.log("Service worker registered")})}),window.addEventListener("beforeinstallprompt",i=>(console.log("beforeinstallprompt fired"),i.preventDefault(),deferredPrompt=i,!1)),"Notification"in window&&"serviceWorker"in navigator&&enableNotificationsButtons.forEach((i,e)=>{enableNotificationsButtons[e].style.display="inline-block",enableNotificationsButtons[e].addEventListener("click",askForNotificationPermission)});